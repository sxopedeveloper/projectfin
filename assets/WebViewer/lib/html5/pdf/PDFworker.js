(function(b){ArrayBuffer.prototype.slice||(ArrayBuffer.prototype.slice=function(b,a){void 0===b&&(b=0);void 0===a&&(a=this.byteLength);b=Math.floor(b);a=Math.floor(a);0>b&&(b+=this.byteLength);0>a&&(a+=this.byteLength);b=Math.min(Math.max(0,b),this.byteLength);a=Math.min(Math.max(0,a),this.byteLength);if(0>=a-b)return new ArrayBuffer(0);var f=new ArrayBuffer(a-b),e=new Uint8Array(f),d=new Uint8Array(this,b,a-b);e.set(d);return f})})(this);function createPromiseCapability(){var b={};b.promise=new Promise(function(g,a){b.resolve=g;b.reject=a});return b}
(function(b){function g(h){this._status=a;this._handlers=[];try{h.call(this,this._resolve.bind(this),this._reject.bind(this))}catch(f){this._reject(f)}}if(b.Promise)"function"!==typeof b.Promise.all&&(b.Promise.all=function(a){var f=0,e=[],d,k,g=new b.Promise(function(c,l){d=c;k=l});a.forEach(function(c,l){f++;c.then(function(c){e[l]=c;f--;0===f&&d(e)},k)});0===f&&d(e);return g}),"function"!==typeof b.Promise.resolve&&(b.Promise.resolve=function(a){return new b.Promise(function(f){f(a)})}),"function"!==
typeof b.Promise.reject&&(b.Promise.reject=function(a){return new b.Promise(function(f,b){b(a)})}),"function"!==typeof b.Promise.prototype.catch&&(b.Promise.prototype.catch=function(a){return b.Promise.prototype.then(void 0,a)});else{var a=0,f=2,e="function"===typeof setImmediate&&setImmediate||function(a){setTimeout(a,1)},d={handlers:[],running:!1,unhandledRejections:[],pendingRejectionCheck:!1,scheduleHandlers:function(h){h._status!==a&&(this.handlers=this.handlers.concat(h._handlers),h._handlers=
[],this.running||(this.running=!0,e(this.runHandlers.bind(this),0)))},runHandlers:function(){for(var a=Date.now()+1;0<this.handlers.length;){var b=this.handlers.shift(),d=b.thisPromise._status,g=b.thisPromise._value;try{1===d?"function"===typeof b.onResolve&&(g=b.onResolve(g)):"function"===typeof b.onReject&&(g=b.onReject(g),d=1,b.thisPromise._unhandledRejection&&this.removeUnhandeledRejection(b.thisPromise))}catch(k){d=f,g=k}b.nextPromise._updateStatus(d,g);if(Date.now()>=a)break}0<this.handlers.length?
e(this.runHandlers.bind(this),0):this.running=!1},addUnhandledRejection:function(a){this.unhandledRejections.push({promise:a,time:Date.now()});this.scheduleRejectionCheck()},removeUnhandeledRejection:function(a){a._unhandledRejection=!1;for(var f=0;f<this.unhandledRejections.length;f++)this.unhandledRejections[f].promise===a&&(this.unhandledRejections.splice(f),f--)},scheduleRejectionCheck:function(){this.pendingRejectionCheck||(this.pendingRejectionCheck=!0,setTimeout(function(){this.pendingRejectionCheck=
!1;for(var a=Date.now(),f=0;f<this.unhandledRejections.length;f++)if(500<a-this.unhandledRejections[f].time){var b=this.unhandledRejections[f].promise._value,e="Unhandled rejection: "+b;b.stack&&(e+="\n"+b.stack);warn(e);this.unhandledRejections.splice(f);f--}this.unhandledRejections.length&&this.scheduleRejectionCheck()}.bind(this),500))}};g.all=function(a){function b(l){k._status!==f&&(c=[],d(l))}var e,d,k=new g(function(c,l){e=c;d=l}),p=a.length,c=[];if(0===p)return e(c),k;for(var l=0,r=a.length;l<
r;++l){var u=a[l],v=function(l){return function(r){k._status!==f&&(c[l]=r,p--,0===p&&e(c))}}(l);g.isPromise(u)?u.then(v,b):v(u)}return k};g.isPromise=function(a){return a&&"function"===typeof a.then};g.resolve=function(a){return new g(function(f){f(a)})};g.reject=function(a){return new g(function(f,b){b(a)})};g.prototype={_status:null,_value:null,_handlers:null,_unhandledRejection:null,_updateStatus:function(a,b){1!==this._status&&this._status!==f&&(1===a&&g.isPromise(b)?b.then(this._updateStatus.bind(this,
1),this._updateStatus.bind(this,f)):(this._status=a,this._value=b,a===f&&0===this._handlers.length&&(this._unhandledRejection=!0,d.addUnhandledRejection(this)),d.scheduleHandlers(this)))},_resolve:function(a){this._updateStatus(1,a)},_reject:function(a){this._updateStatus(f,a)},then:function(a,f){var b=new g(function(a,f){this.resolve=a;this.reject=f});this._handlers.push({thisPromise:this,onResolve:a,onReject:f,nextPromise:b});d.scheduleHandlers(this);return b},catch:function(a){return this.then(void 0,
a)}};b.Promise=g}})("undefined"===typeof window?this:window);(function(b){var g=function(a,f){var b=function(a){a=this.catch(a);return{cancel:f,promise:a,then:d.bind(a),catch:b.bind(a)}},d=function(a,g){var n=this.then(a,g);return{cancel:f,promise:n,then:d.bind(n),catch:b.bind(n)}};return{cancel:f,promise:a,then:d.bind(a),catch:b.bind(a)}};b.CancellablePromise=function(a,f){var b=!1,d,h=new Promise(function(h,g){d=function(){b||(f(),g("cancelled"))};(new Promise(a)).then(function(a){b=!0;h(a)},function(a){b=!0;g(a)})});return g(h,d)};b.CancellablePromise.all=
function(a){var f=Promise.all(a);return g(f,function(){a.forEach(function(a,f){a.cancel&&a.cancel()})})}})("undefined"===typeof self?this:self);var comObjToHandler={};
(function(b){b.MessageHandler=function(g,a){this.name=g;this.comObj=a;this.callbackIndex=1;this.postMessageTransfers=!0;var f=this.callbacksCapabilities={},e=this.actionHandler={},d=this.actionHandlerAsync={};this.nextAsync=null;var h=this,m=!1;e.console_log=[function(a){console.log(a)}];e.console_error=[function(a){b.utils.error(a)}];e.workerLoaded=[function(a){}];e.worker_restart=[function(f){var d=a,e=comObjToHandler[d];setTimeout(function(){d.removeEventListener("message",e);d.terminate();d=null},
5E3);h.newWorker=new Worker(f.location);h.tempWorker={redirectQueue:[],queue:[],postMessage:function(a,c){this.queue[this.queue.length]={msg:a,transfers:c}}};console.warn("Worker Resize required. Note that changes to PDF documents may be lost.");b.utils.log("I resize "+f.size);h.comObj=a=h.tempWorker;comObjToHandler[h.newWorker]=e;h.newWorker.addEventListener("message",e);d.onerror&&(h.newWorker.onerror=h.tempWorker.onerror=d.onerror);h.oldQueue=f.queue;f.queue=null;f.array=new Uint8Array([this.postMessageTransfers?
255:0]);m||(h.replace("test",function(f){h.comObj=a=h.newWorker;for(f=0;f<h.oldQueue.length;++f){var c=h.oldQueue[f];h.postMessage(c)}for(f=0;f<h.tempWorker.redirectQueue.length;++f)c=h.tempWorker.redirectQueue[f],h.postMessage(c);for(f=0;f<h.tempWorker.queue.length;++f)c=h.tempWorker.queue[f],h.comObj.postMessage(c.msg,c.transfers);h.oldQueue=null;h.tempWorker=null;h.newWorker=null}),m=!0);h.newWorker.postMessage({action:"test",data:f})}];e.redirect_request=[function(f){a.redirectQueue?a.redirectQueue[a.redirectQueue.length]=
f:(b.utils.log("Redirect Request needed to be posted."),h.postMessage(f))}];a in comObjToHandler&&a.removeEventListener("message",comObjToHandler[a]);comObjToHandler[a]=function(a){var g=a.data,k=function(c){if(c.message||c.errorData){c.message&&c.message.message&&(c.message=c.message.message);var a=c.errorData;c={type:c.type?c.type:"JavascriptError",message:c.message};if(a)for(var f in a)a.hasOwnProperty(f)&&(c[f]=a[f])}h.postMessage({isReply:!0,callbackId:g.callbackId,error:c})};if(g.isReply)if(a=
g.callbackId,a in f){var m=f[a];delete f[a];"error"in g?m.reject(g.error):m.resolve(g.data)}else b.utils.warn("Cannot resolve callback "+a);else if(g.action in e){var c=e[g.action];g.callbackId?Promise.resolve().then(function(){return c[0].call(c[1],g.data)}).then(function(c){h.postMessage({isReply:!0,callbackId:g.callbackId,data:c})},function(c){k(c)}):c[0].call(c[1],g.data)}else g.action in d?(c=d[g.action],a=createPromiseCapability(),g.callbackId?a.promise.then(function(c){h.postMessage({isReply:!0,
callbackId:g.callbackId,data:c});h.nextAsync()},function(c){k(c);h.nextAsync()}):a.promise.then(function(c){h.nextAsync()},function(c){h.nextAsync()}),c[0].call(c[1],g,a)):b.utils.error("Unknown action from worker: "+g.action)};a.addEventListener("message",comObjToHandler[a])};b.MessageHandler.prototype={on:function(g,a,f){var e=this.actionHandler;e[g]&&b.utils.error('There is already an actionName called "'+g+'"');e[g]=[a,f]},replace:function(b,a,f){this.actionHandler[b]=[a,f]},onAsync:function(g,
a,f){var e=this.actionHandlerAsync;e[g]&&b.utils.error('There is already an actionName called "'+g+'"');e[g]=[a,f]},replaceAsync:function(b,a,f){var e=this.actionHandlerAsync,d=this.actionHandler;d[b]&&delete d[b];e[b]=[a,f]},onNextAsync:function(b){this.nextAsync=b},send:function(b,a){this.postMessage({action:b,data:a})},getNextId:function(){return this.callbackIndex++},sendWithPromise:function(b,a,f){var e=this.getNextId();b={action:b,data:a,callbackId:e,priority:f};a=createPromiseCapability();
this.callbacksCapabilities[e]=a;try{this.postMessage(b)}catch(d){a.reject(d)}return a.promise},sendWithPromiseReturnId:function(b,a,f){var e=this.getNextId();b={action:b,data:a,callbackId:e,priority:f};a=createPromiseCapability();this.callbacksCapabilities[e]=a;try{this.postMessage(b)}catch(d){a.reject(d)}return{promise:a.promise,callbackId:e}},sendWithPromiseWithId:function(g,a,f,e){a>this.callbackIndex&&b.utils.error("Can't reuse callbackId "+a+" lesser than callbackIndex "+this.callbackIndex);
a in this.callbacksCapabilities&&b.utils.error("Can't reuse callbackId "+a+". There is a capability waiting to be resolved. ");g={action:g,data:f,callbackId:a};f=createPromiseCapability();this.callbacksCapabilities[a]=f;try{this.postMessage(g)}catch(d){f.reject(d)}return f.promise},getPromise:function(g){if(g in this.callbacksCapabilities)return this.callbacksCapabilities[g];b.utils.error("Cannot get promise for callback "+g)},cancelPromise:function(g){if(g in this.callbacksCapabilities){var a=this.callbacksCapabilities[g];
delete this.callbacksCapabilities[g];a.reject({type:"Cancelled",message:"Request has been cancelled."});this.postMessage({action:"actionCancel",data:{callbackId:g}})}else b.utils.warn("Cannot cancel callback "+g)},postMessage:function(b){if(this.postMessageTransfers){var a=this.getTransfersArray(b);this.comObj.postMessage(b,a)}else this.comObj.postMessage(b)},getObjectTransfers:function(b,a){if("object"===typeof b)if(b instanceof Uint8Array)a.push(b.buffer);else if(b instanceof ArrayBuffer)a.push(b);
else for(prop in b)b.hasOwnProperty(prop)&&this.getObjectTransfers(b[prop],a)},getTransfersArray:function(b){var a=[];this.getObjectTransfers(b,a);return 0==a.length?void 0:a}}})("undefined"===typeof window?this:window);(function(b){var g=b._trnDebugMode;"undefined"===typeof b.utils&&(b.utils={warn:function(a){g&&console.warn(a)},log:function(a){g&&console.log(a)},error:function(a){g&&console.error(a);throw Error(a);}});b.info=function(a){b.utils.log(a)};b.warn=function(a){b.utils.warn(a)};b.error=function(a){b.utils.error(a)}})("undefined"===typeof window?this:window);(function(b){b.Module={TOTAL_MEMORY:50331648,noExitRuntime:!0,devicePixelRatio:1,cur_doc:null,cache_ptr_size:0,has_buf_ownership:!0,loaded:!1,init_cb:null,cache_ptr:null,cleanupState:null,stopped:!1,docs:{},postEvent:function(b,a,f){Module.workerMessageHandler.send("event",{docId:b,type:a,data:f})},postPagesUpdatedEvent:function(b,a,f){b={pageDimensions:Module.GetPageDimensions(b)};if(f)for(var e=0;e<f.length;++e)f[e]in b.pageDimensions?b.pageDimensions[f[e]].contentChanged=!0:console.warn("Invalid Page Number "+
f[e]);Module.postEvent(a,"pagesUpdated",b);return b},GetIndividualPageDimensions:function(b,a,f){b=Module.PageGetPageInfo(f);b.id=Module.PageGetId(f);return b},GetPageDimensionsRange:function(b,a,f){for(var e={},d=Module.PDFDocGetPageIterator(b,a);a<f&&Module.IteratorHasNext(d);++a){var h=Module.IteratorCurrent(d);e[a]=this.GetIndividualPageDimensions(b,a,h);Module.IteratorNext(d)}return e},GetPageDimensions:function(b){try{var a=Module.Runtime.stackSave(),f=Module.GetPageCount(b);if(0===f)throw"This document has no pages.";
return Module.GetPageDimensionsRange(b,1,f+1)}finally{Module.Runtime.stackRestore(a)}},loadDoc:function(b,a,f){"undefined"===typeof Module&&this._main();var e=null;try{var d=Module.Runtime.stackSave();f=Module.CreateDoc(b,a,f);var h=Module.GetDoc(f);if(Module.PDFDocInitSecurityHandler(h))return{docId:f,pageDimensions:Module.GetPageDimensions(h)};e={type:"NeedsPassword",errorData:{docId:f},message:"This document requires a password"}}catch(m){e={type:"InvalidPDF",message:m}}finally{Module.Runtime.stackRestore(d)}throw e;
},loadCanvas:function(b,a,f,e,d,h,m,n,q){var k=Module.GetDoc(b),p=a+1,c=function(){Module.RasterizePage(k,p,f,e,h,d,m,n,q)},l=Module.docs[b].chunkStorage;if(l){b=Module.GetDownloadData(k).downloader;var r=l.getRequiredChunkOffsetArrays(b,p);l.keepChunks(r.have);b=function(){var a=l.getChunks(r.missing);Module.loadPromise=a.then(function(){var l=Module.loadPromise.cancelled;Module.loadPromise=null;l||c()}).catch(function(c){"cancelled"!==c?q.reject(c):Module.loadPromise=null})};Module.loadPromise?
Module.loadPromise.then(b,b):b()}else c()},loadResources:function(g,a){Module.Initialize(a);b.utils.log("PDFNet initialized!");Module.f0(!1);var f=new Uint8Array(g);Module.PDFNetSetResourceData(f)},_main:function(){enlargeMemory=function(){var b=Math.pow(2,31);if(DYNAMICTOP>=b)return!1;for(;TOTAL_MEMORY<=DYNAMICTOP;)if(TOTAL_MEMORY<b/2)TOTAL_MEMORY=alignMemoryPage(TOTAL_MEMORY+50331648),console.log("Enlarging Emscripten Heap To: "+TOTAL_MEMORY+" bytes");else{var a=TOTAL_MEMORY;TOTAL_MEMORY=alignMemoryPage((3*
TOTAL_MEMORY+b)/4);console.log("Enlarging Emscripten Heap To: "+TOTAL_MEMORY+" bytes");if(TOTAL_MEMORY<=a)return!1}TOTAL_MEMORY=Math.max(TOTAL_MEMORY,16777216);if(TOTAL_MEMORY>=b)return!1;try{if(ArrayBuffer.transfer)buffer=ArrayBuffer.transfer(buffer,TOTAL_MEMORY);else{var f=HEAP8;buffer=new ArrayBuffer(TOTAL_MEMORY)}}catch(e){return!1}if(!_emscripten_replace_memory(buffer))return!1;Module.buffer=buffer;Module.HEAP8=HEAP8=new Int8Array(buffer);Module.HEAP16=HEAP16=new Int16Array(buffer);Module.HEAP32=
HEAP32=new Int32Array(buffer);Module.HEAPU8=HEAPU8=new Uint8Array(buffer);Module.HEAPU16=HEAPU16=new Uint16Array(buffer);Module.HEAPU32=HEAPU32=new Uint32Array(buffer);Module.HEAPF32=HEAPF32=new Float32Array(buffer);Module.HEAPF64=HEAPF64=new Float64Array(buffer);ArrayBuffer.transfer||HEAP8.set(f);return!0};"undefined"===typeof Module&&(("undefined"!==typeof window?window:self).Module={});(function(g){g.PDFDocExportXFDF=function(a,b){var e=Module.GetDoc(a),d=Module.Runtime.stackSave(),h;try{var m=
b?Module.PDFDocFDFExtract(e,b):Module.PDFDocFDFExtract(e);h=Module.FDFDocSaveAsXFDF(m);Module.Runtime.stackRestore(d)}catch(g){throw Module.Runtime.stackRestore(d),g;}return h};g.PageArrayToPageSet=function(a){var b=Module.Runtime.stackSave(),e;try{e=Module.PageSetCreate();for(var d=0;d<a.length;++d)Module.PageSetAddPage(e,a[d]);Module.Runtime.stackRestore(b)}catch(h){throw Module.Runtime.stackRestore(b),h;}return e};g.cancelCurrent=function(){var a=Module.loadPromise;return a?(a.cancel(),a.cancelled=
!0):(a=Module.cleanupState)?(clearTimeout(a.timeout),a.cleanupArr.forEach(function(a){a()}),Module.cleanupState=null,!0):!1};g.SetWorkerRestartCallback=function(a){Module.workerRestartCallback=a};g.XFDFMerge=function(a,b){if(b){for(var e=Module.PDFDocGetPageIterator(a,1);Module.IteratorHasNext(e);){var d=Module.IteratorCurrent(e);try{for(var h=Module.PageGetNumAnnots(d);0<h;){var m=Module.PageGetAnnot(d,--h);switch(Module.AnnotGetType(m)){case 1:case 16:case 17:case 18:case 19:break;default:g.PageAnnotRemove(d,
h)}}}catch(n){Module.ObjErase(d,"Annots")}Module.IteratorNext(e)}e=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f1(Module.GetUStringFromJSString(b),e));e=Module.getValue(e,"i8*");REX(Module.f2(a,e))}};g.MergeXFDF=function(a,b,e){var d=[];try{var h=Module.Runtime.stackSave();d[d.length]=function(){Module.Runtime.stackRestore(h)};var m=Module.GetDoc(a);Module.XFDFMerge(m,b);setTimeout(function(){d.forEach(function(a){a()});e.resolve({})},0)}catch(g){Module.stopped||(d.forEach(function(a){a()}),
e.reject(g))}};g.SaveHelper=function(a,b,e){e="undefined"===typeof e?2:e;Module.allocate(4,"i8",Module.ALLOC_STACK);Module.allocate(4,"i8",Module.ALLOC_STACK);Module.MakeDev(b);REX(Module.f3(a,Module.GetUStringFromJSString(b),e,0));return Module.docs[b].buffer.buffer};g.SaveDoc=function(a,b,e,d){var h=Module.GetDoc(a),m=[];try{var h=Module.GetDoc(a),g=Module.Runtime.stackSave();m[m.length]=function(){Module.Runtime.stackRestore(g)};Module.XFDFMerge(h,b);for(var q=Module.PDFDocGetPageIterator(h,1);Module.IteratorHasNext(q);){var k=
Module.IteratorCurrent(q);try{for(var p=Module.PageGetNumAnnots(k);0<p;){var c=Module.PageGetAnnot(k,--p);Module.AnnotHasAppearance(c)||Module.AnnotRefreshAppearance(c)}}catch(l){Module.ObjErase(k,"Annots")}Module.IteratorNext(q)}var r=Module.SaveHelper(h,a);setTimeout(function(){m.forEach(function(c){c()});if(e)d.resolve({fileData:r});else{var c=r.slice(0);d.resolve({fileData:c})}},0)}catch(u){Module.stopped||(m.forEach(function(c){c()}),d.reject(u))}};g.GetCurrentCanvasData=function(a){var b=Module.currentRenderData;
if(!b)return null;a&&REX(Module.f4(b.rast));a=new Uint8Array(new ArrayBuffer(b.buf_size));for(var e=0,d=0;d<b.out_height;++d)for(var h=b.bufPtr+b.stride*d,m=0;m<b.out_width;++m)a[e++]=Module.HEAPU8[h+2],a[e++]=Module.HEAPU8[h+1],a[e++]=Module.HEAPU8[h],a[e++]=Module.HEAPU8[h+3],h+=4;return{pageBuf:a.buffer,pageWidth:b.out_width,pageHeight:b.out_height}};g.RasterizePage=function(a,f,e,d,h,m,g,q,k){Module.currentRenderData={};var p=Module.currentRenderData;p.out_width=parseInt(e);p.out_height=parseInt(d);
var c=[];c.push(function(){Module.currentRenderData=null});try{var l=Module.Runtime.stackSave();c[c.length]=function(){Module.Runtime.stackRestore(l)};var r=Module.GetPage(a,f),u=Module.PageGetPageWidth(r),v=Module.PageGetPageHeight(r);p.stride=4*p.out_width;p.buf_size=p.out_width*p.out_height*4;p.rast=Module.PDFRasterizerCreate();c.push(function(){Module.f5(p.rast)});if(g){var t=Module.EMSCreateUpdatedLayersContext(a,g);0!=t&&(Module.f6(p.rast,t),c.push(function(){Module.f7(t)}))}REX(Module.f8(p.rast,
q));var s=Module.PageGetRotation(r);a=1==m||3==m;var s=(1==s||3==s)!=a,w,x=Module.allocate(48,"i8",Module.ALLOC_STACK);if(h){h.x1=h[0];h.y1=h[1];h.x2=h[2];h.y2=h[3];noRotateDefaultMtxPtr=Module.PageGetDefaultMatrix(r,0);invMtxPtr=Module.Matrix2DInverse(noRotateDefaultMtxPtr);h=Module.Matrix2DMultBBox(invMtxPtr,h);var y;h.x2<h.x1&&(y=h.x1,h.x1=h.x2,h.x2=y);h.y2<h.y1&&(y=h.y1,h.y1=h.y2,h.y2=y);w=p.out_width/(s?h.y2-h.y1:h.x2-h.x1);mtxPtr=Module.GetDefaultMatrixBox(r,h,m)}else mtxPtr=Module.PageGetDefaultMatrix(r,
m),w=p.out_width/(a?v:u);Module.Matrix2DSet(x,w,0,0,w,0,0);Module.Matrix2DConcat(x,mtxPtr);p.bufPtr=Module._malloc(p.buf_size);Module._memset(p.bufPtr,255,p.buf_size);c.push(function(){Module._free(p.bufPtr)});var z=Module.allocate(4,"i8",Module.ALLOC_STACK),B=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f9(p.rast,0));REX(Module.f10(p.rast,r,p.bufPtr,p.out_width,p.out_height,p.stride,4,!0,x,0,0,0,z));var A=Module.getValue(z,"i8*");c.push(function(){REX(Module.f11(A))});var C=(new Date).getTime(),
D=function(){try{for(var l=0,a=(new Date).getTime(),r=!1;200>l;){REX(Module.f12(A,B));if(!Module.getValue(B,"i8*")){r=!0;break}l=(new Date).getTime()-a}if(r){var f=Module.GetCurrentCanvasData(!1);b.utils.log("Total Page Time "+((new Date).getTime()-C));Module.stopped||(c.forEach(function(c){c()}),k.resolve(f))}else Module.cleanupState.timeout=setTimeout(D,0)}catch(d){Module.stopped||(c.forEach(function(c){c()}),k.reject(d))}},E=setTimeout(D,0);Module.cleanupState={cleanupArr:c,timeout:E};c.push(function(){Module.cleanupState=
null})}catch(F){Module.stopped||(c.forEach(function(c){c()}),k.reject(F))}};g.GetDestinationVPosHPos=function(a){var b=0,e=0,d=!1,h=!1,m=Module.DestinationGetPage(a),g=Module.DestinationGetExplicitDestObj(a),m=Module.PageGetDefaultMatrix(m),m=Module.Matrix2DInverse(m),q=Module.Matrix2DMult(m,{x:e,y:b}),e=q.x,b=q.y,k;try{switch(Module.DestinationGetFitType(a)){case 2:case 6:k=Module.ObjGetAt(g,2);Module.ObjIsNumber(k)&&(b=Module.ObjGetNumber(k),d=!0);break;case 0:k=Module.ObjGetAt(g,2);Module.ObjIsNumber(k)&&
(e=Module.ObjGetNumber(k),h=!0);k=Module.ObjGetAt(g,3);Module.ObjIsNumber(k)&&(b=Module.ObjGetNumber(k),d=!0);break;case 4:k=Module.ObjGetAt(g,2);Module.ObjIsNumber(k)&&(e=Module.ObjGetNumber(k),h=!0);k=Module.ObjGetAt(g,5);Module.ObjIsNumber(k)&&(b=Module.ObjGetNumber(k),d=!0);break;case 3:case 7:k=Module.ObjGetAt(g,2),Module.ObjIsNumber(k)&&(e=Module.ObjGetNumber(k),h=!0)}q=Module.Matrix2DMult(m,{x:e,y:b});e=q.x;b=q.y;d||(b=0);h||(e=0)}catch(p){e=b=0}return{hpos:e,vpos:b}};g.FillBookmarkTree=function(a,
b){for(var e=0;Module.BookmarkIsValid(a);a=Module.BookmarkGetNext(a),++e)try{var d=[];if(Module.BookmarkHasChildren(a)){var h=Module.BookmarkGetFirstChild(a);Module.FillBookmarkTree(h,d)}var g=Module.BookmarkGetTitle(a),d={children:d,name:g},n=Module.BookmarkGetAction(a),q=Module.ActionGetType(n);if(0==q){var k=Module.ActionGetDest(n);if(Module.DestinationIsValid(k)){var p=Module.DestinationGetPage(k);if(Module.PageIsValid(p)){var c=Module.PageGetIndex(p);if(0<c){d.pageNumber=c;var l=Module.GetDestinationVPosHPos(k);
d.verticalOffset=l.vpos;d.horizontalOffset=l.hpos}}}}else if(5==q){var r=Module.ObjFindObj(n,"URI");r&&(d.url=Module.ObjGetAsPDFText(r))}b[b.length]=d}catch(u){}};g.LoadBookmarks=function(a){a=Module.GetDoc(a);var b=[],e=Module.Runtime.stackSave();try{var d=Module.PDFDocGetFirstBookmark(a);Module.BookmarkIsValid(d)&&Module.FillBookmarkTree(d,b)}catch(h){}Module.Runtime.stackRestore(e);return{bookmarks:b}};g.UpdatePassword=function(a,b){try{var e=Module.Runtime.stackSave(),d=Module.GetDoc(a);return Module.PDFDocInitStdSecurityHandler(d,
b)?(d in downloadDataMap&&REX(Module.f13(d,downloadDataMap[d].downloader)),{success:!0,pageDimensions:Module.GetPageDimensions(d)}):{success:!1}}finally{Module.Runtime.stackRestore(e)}};g.GetTextData=function(a,b,e){a=Module.GetDoc(a);var d=[];try{var h=Module.Runtime.stackSave();d[d.length]=function(){Module.Runtime.stackRestore(h)};var g=Module.GetPage(a,b),n=Module.allocate(8,"i8",Module.ALLOC_STACK);REX(Module.f14(n));var q=Module.getValue(n,"i8*");d[d.length]=function(){f15(q)};REX(Module.f16(q,
g,0,0));var k=Module.allocate(48,"i8",Module.ALLOC_STACK);REX(Module.f17(g,!0,1,0,k));var p=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f18(q,k,0,p));var c=Module.getValue(p,"i8*"),l=Module._malloc(8*c);d[d.length]=function(){Module._free(l)};REX(Module.f18(q,k,l,p));var r=Module.GetJSDoubleArrFromCore(l,c),u=Module.allocate(4,"i8",Module.ALLOC_STACK),v=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f19(v));d[d.length]=function(){Module.f20(t)};var t=Module.getValue(v,"i8*");REX(Module.f21(q,
t,0,u));var s=Module.GetJSStringFromUString(t),w=Module.getValue(u,"i8*"),x=Module._malloc(4*w);d[d.length]=function(){Module._free(x)};REX(Module.f21(q,t,x,u));var y=Module.GetJSIntArrayFromCore(x,w),z=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f22(q,k,0,z));var B=Module.getValue(z,"i8*"),A=Module._malloc(8*B);d[d.length]=function(){Module._free(A)};REX(Module.f22(q,k,A,z));var C=Module.GetJSDoubleArrFromCore(A,B);setTimeout(function(){d.forEach(function(c){c()});e.resolve({str:s,quads:r,
offsets:y,struct:C})},0)}catch(D){Module.stopped||(d.forEach(function(c){c()}),e.reject(D))}};g.InsertBlankPages=function(a,b,e,d,h){var g=[],n=Module.GetDoc(a);try{var q=Module.Runtime.stackSave();g[g.length]=function(){Module.Runtime.stackRestore(q)};for(var k=b.length-1;0<=k;--k){var p=Module.PDFDocGetPageIterator(n,b[k]),c=Module.PDFDocPageCreate(n,e,d);Module.PDFDocPageInsert(n,p,c)}var l=Module.postPagesUpdatedEvent(n,a);setTimeout(function(){Module.stopped||(g.forEach(function(c){c()}),h.resolve(l))},
0)}catch(r){Module.stopped||(g.forEach(function(c){c()}),h.reject(r))}};g.InsertPages=function(a,b,e,d,h,g){var n=[],q=Module.GetDoc(a);try{var k=Module.Runtime.stackSave();n[n.length]=function(){Module.Runtime.stackRestore(k)};var p;if(b instanceof ArrayBuffer){var c=Module.CreateDoc(b);p=Module.GetDoc(c);n[n.length]=function(){Module.DeleteDoc(c)}}else p=Module.GetDoc(b);var l=e.length,r=Module.PageSetCreate();for(b=0;b<l;++b)Module.PageSetAddPage(r,e[b]);Module.PDFDocInsertPages(q,d,p,r,h);Module.GetPageDimensions(q);
var u=Module.PageSetCreateRange(d,d+l);Module.PDFDocExportXFDF(a,u);var v=Module.postPagesUpdatedEvent(q,a);setTimeout(function(){n.forEach(function(c){c()});g.resolve(v)},0)}catch(t){Module.stopped||(n.forEach(function(c){c()}),g.reject(t))}};g.MovePages=function(a,b,e,d){var h=[],g=Module.GetDoc(a);try{var n=Module.Runtime.stackSave();h[h.length]=function(){Module.Runtime.stackRestore(n)};for(var q=b.length,k=Module.PageSetCreate(),p=0;p<q;++p)Module.PageSetAddPage(k,b[p]);Module.PDFDocMovePages(g,
e,k);var c=Module.postPagesUpdatedEvent(g,a);setTimeout(function(){Module.stopped||(h.forEach(function(c){c()}),d.resolve(c))},0)}catch(l){Module.stopped||(h.forEach(function(c){c()}),d.reject(l))}};g.RemovePages=function(a,b,e){var d=Module.GetDoc(a),h=[];try{var g=Module.Runtime.stackSave();h[h.length]=function(){Module.Runtime.stackRestore(g)};for(var n=b.length-1;0<=n;--n){var q=Module.PDFDocGetPageIterator(d,b[n]);Module.IteratorHasNext(q)&&Module.PDFDocPageRemove(d,q)}var k=Module.postPagesUpdatedEvent(d,
a);setTimeout(function(){h.forEach(function(c){c()});e.resolve(k)},0)}catch(p){Module.stopped||(h.forEach(function(c){c()}),e.reject(p))}};g.RotatePages=function(a,b,e,d){var h=Module.GetDoc(a),g=[];try{var n=Module.Runtime.stackSave();g[g.length]=function(){Module.Runtime.stackRestore(n)};var q=b.length,k=0,p=Module.PDFDocGetPageIterator(h,b[0]);g.push(function(){Module.f23(p)});for(var c=b[0];Module.IteratorHasNext(p)&&k<b[q-1];++c){if(c===b[k]){var l=Module.IteratorCurrent(p),r=(Module.PageGetRotation(l)+
e)%4;Module.PageSetRotation(l,r);k++}Module.IteratorNext(p)}var u=Module.postPagesUpdatedEvent(h,a);setTimeout(function(){g.forEach(function(c){c()});d.resolve(u)},0)}catch(v){Module.stopped||(g.forEach(function(c){c()}),d.reject(v))}};g.ExtractPages=function(a,b,e,d){var h=[];try{var g=Module.Runtime.stackSave();h[h.length]=function(){Module.Runtime.stackRestore(g)};var n=function(c){Module.stopped||(h.forEach(function(c){c()}),d.reject(c))};Module.XFDFMerge(a,e);var q=Module.CreateEmptyDoc(),k=
createPromiseCapability();h[h.length]=function(){Module.DeleteDoc(q)};k.promise.then(function(c){d.promise.then(function(c){h.forEach(function(c){c()});return c},n);Module.SaveDoc(q,void 0,!0,d)},n);Module.InsertPages(q,a,b,1,!0,k)}catch(p){n(p)}};g.CropPages=function(a,b,e,d,h,g,n){var q=Module.GetDoc(a),k=[];try{var p=Module.Runtime.stackSave();k[k.length]=function(){Module.Runtime.stackRestore(p)};var c=b.length,l=0,r=Module.PDFDocGetPageIterator(q,b[0]);k.push(function(){Module.f23(r)});for(var u=
b[0];Module.IteratorHasNext(r)&&l<b[c-1];++u){if(u===b[l]){var v=Module.IteratorCurrent(r),t=Module.allocate(8,"i8",Module.ALLOC_STACK);REX(Module.f24(v,t));var s=Module.PageGetRotation(v),w=Module.getValue(t,"double"),x=Module.getValue(t+8,"double"),y=Module.getValue(t+16,"double"),z=Module.getValue(t+24,"double");0===s%4?(Module.setValue(t,w+h,"double"),Module.setValue(t+8,x+d,"double"),Module.setValue(t+16,y-g,"double"),Module.setValue(t+24,z-e,"double")):1===s%4?(Module.setValue(t,w+e,"double"),
Module.setValue(t+8,x+h,"double"),Module.setValue(t+16,y-d,"double"),Module.setValue(t+24,z-g,"double")):2===s%4?(Module.setValue(t,w+g,"double"),Module.setValue(t+8,x+e,"double"),Module.setValue(t+16,y-h,"double"),Module.setValue(t+24,z-d,"double")):3===s%4&&(Module.setValue(t,w+d,"double"),Module.setValue(t+8,x+g,"double"),Module.setValue(t+16,y-e,"double"),Module.setValue(t+24,z-h,"double"));Module.setValue(t+32,0,"double");REX(Module.f25(v,t));l++}Module.IteratorNext(r)}var B=Module.postPagesUpdatedEvent(q,
a);setTimeout(function(){k.forEach(function(c){c()});n.resolve(B)},0)}catch(A){Module.stopped||(k.forEach(function(c){c()}),n.reject(A))}}})("undefined"===typeof self?this.Module:self.Module);this.loaded=!0;Module.init_cb&&Module.init_cb()}}})("undefined"===typeof self?this:self);"undefined"===typeof Module&&(("undefined"!==typeof window?window:self).Module={});var crawp=Module.crap;
(function(b){b.currentFileString="/current";var g=0,a=0,f={},e=null,d=function(c,l,a){var b=new XMLHttpRequest;return CancellablePromise(function(d,e){b.open("GET",c,!0);b.responseType="arraybuffer";b.onerror=function(){e("Network error occurred")};b.onload=function(c){206==this.status&&b.response.byteLength==a?(c=new Int8Array(b.response),d(c)):e("Download Failed")};var s=["bytes=",l,"-",l+a-1].join("");b.setRequestHeader("Range",s);b.send()},function(){b.abort()})},h=function(c){this.file=c;this.position=
0;this.length=c.size;this.reader=new FileReaderSync};h.prototype={read:function(c,l,a){a=this.position+a<=this.length?a:this.length-this.position;c=c.subarray(l,l+a);l=new Int8Array(this.reader.readAsArrayBuffer(this.file.slice(this.position,this.position+a)));c.set(l);this.position+=a;return a},seek:function(c){this.position=c},close:function(){this.reader=this.file=null},getPos:function(){return this.position},getTotalSize:function(){return this.length}};var m=function(c){this.data=c;this.position=
0;this.length=this.data.length};m.prototype={read:function(c,l,a){a=this.position+a<=this.length?a:this.length-this.position;c=c.subarray(l,l+a);l=this.data.subarray(this.position,this.position+a);c.set(l);this.position+=a;return a},write:function(c,l,a){a=this.position+a<=this.length?a:this.length-this.position;c=c.subarray(l,l+a);this.data.subarray(this.position,this.position+a).set(c);this.position+=a;return a},seek:function(c){this.position=c},close:function(){this.data=null},getPos:function(){return this.position},
getTotalSize:function(){return this.length}};var n=function(c,l,a){"object"===typeof c?(this.lruList=c.lruList,this.chunkMap=c.chunkMap,this.length=c.length,this.url=c.url):(this.lruList=[],this.chunkMap={},this.chunkMap[l]=a,this.length=l,this.url=c)};n.prototype={lruUpdate:function(c){var l=this.lruList.lastIndexOf(c);0<=l&&this.lruList.splice(l,1);this.lruList.push(c)},getChunk:function(c){if(this.chunkMap[c])this.lruUpdate(c);else{var l=Math.min(c+524288,this.length)-1;Date.now();var a=new XMLHttpRequest;
a.open("GET",this.url,!1);a.responseType="arraybuffer";a.setRequestHeader("Range",["bytes=",c,"-",l].join(""));a.send();if(200==a.status||206==a.status)this.writeChunk(new Int8Array(a.response),c);else throw Error("Failed to load data from");}return this.chunkMap[c]},hadChunk:function(c){return c in this.chunkMap},hasChunk:function(c){return this.chunkMap[c]},getCacheData:function(){return this.chunkMap[this.length]},getRequiredChunkOffsetArrays:function(c,l){var a={have:[],downloading:[],missing:[]};
try{var b=Module.Runtime.stackSave(),d=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f26(c,l,d));var e=Module.getValue(d,"i8*");if(e){var s=Module._malloc(4*e);REX(Module.f27(c,l,s,e));for(d=0;d<e;++d){var f=Module.getValue(s+4*d,"i8*");this.hasChunk(f)?a.have.push(f):this.hadChunk(f)?a.missing.push(f):a.downloading.push(f)}}}finally{s&&Module._free(s),Module.Runtime.stackRestore(b)}return a},keepVisibleChunks:function(c,l){for(var a=l.length,b=0,d=0;d<a;++d){var e=this.getRequiredChunkOffsetArrays(c,
l[d]),s=e.have,f=s.length,b=b+f;if(100<b){this.keepChunks(s.slice(0,f-b+100));break}this.keepChunks(e.have)}},getChunkAsync:function(c){var l=this,a=c+524288,b=524288;a>this.length&&(b-=a-this.length);return d(this.url,c,b).then(function(a){l.writeChunk(a,c)})},getChunks:function(c){for(var a=c.length,b=Array(a),d=0;d<a;++d)b[d]=this.getChunkAsync(c[d]);return CancellablePromise.all(b)},keepChunks:function(c){for(var a=c.length,b=0;b<a;++b)this.lruUpdate(c[b])},writeChunk:function(c,a,b){b=b?b:0;
var d=this.chunkMap[a],e=c.length,f=200<=this.lruList.length&&!d;524288!=e||c.buffer.byteLength!=e?(f?(f=this.lruList.shift(),d=this.chunkMap[f],524288>d.length&&(d=new Int8Array(524288)),this.chunkMap[f]=null):d=d?this.chunkMap[a]:new Int8Array(524288),d.subarray(b,b+e).set(c),c=d):f&&(f=this.lruList.shift(),this.chunkMap[f]=null);this.lruUpdate(a);this.chunkMap[a]=c}};var q=function(c){this.chunkStorage=c;this.position=0;this.length=this.chunkStorage.length};q.prototype={read:function(c,a,b){var d=
this.position+b<=this.length,e=d?b:this.length-this.position;if(this.position<this.length)for(var f=0,f=0;f<e;){var s=this.position%524288,h=this.position-s,g=e-f;if(this.chunkStorage.hadChunk(h)){var h=this.chunkStorage.getChunk(h),k=c.subarray(a+f,a+f+g),s=h.subarray(s,s+g);k.set(s);s=s.length;f+=s;this.position+=s}else for(this.position+=g;f<e;++f)k[f]=0}if(!d){k=a+e;if(b-=e)a=this.chunkStorage.getCacheData(),b>a.length&&(b=a.length),d=this.position-this.length,k=c.subarray(k,k+b),s=a.subarray(d,
d+b),k.set(s);this.position+=b;return e+b}return e},write:function(c,a,b){var d=this.position+b<=this.length,e=this.position+b<=this.length?b:this.length-this.position,f=c.subarray(a,a+e),s=this.position%524288;this.chunkStorage.writeChunk(f,this.position-s,s);this.position+=e;if(!d){f=a+e;if(b-=e)a=this.chunkStorage.getCacheData(),b>a.length&&(b=a.length),d=this.position-this.length,f=c.subarray(f,f+b),a.subarray(d,d+b).set(f);this.position+=b;return e+b}return e},seek:function(c){this.position=
c},close:function(){this.chunkStorage=null},getPos:function(){return this.position},getTotalSize:function(){return this.length}};var k=function(c){this.docId=c;this.length=0;this.data=new Int8Array(8192);this.position=0};k.prototype={seek:function(c){this.position=c},close:function(){var c=new Int8Array(this.data.buffer.slice(0,this.length));Module.ChangeDocBackend(this.docId,{ptr:Module.GetDoc(this.docId),buffer:c});this.data=null},getPos:function(){return this.position},getTotalSize:function(){return this.length},
read:function(c,a,b){var d=this.data.length;b=b+a<d?b:d-a;c=c.subarray(a,a+b);a=this.data.subarray(this.position,this.position+b);c.set(a);this.position+=b;return b},write:function(c,a,b){for(var d=this.position+b,e=this.data.length;d>e;){var e=Math.max(e*(16777216<e?1.5:2),d),f=new Int8Array(e);f.set(this.data.subarray(0,this.length),0);this.data=f}c=c.subarray(a,a+b);this.data.set(c,this.position);this.position+=b;this.position>this.length&&(this.length=this.position);return b}};var p={IsSink:function(c){return 66===
c.flags},open:function(c){var a=c.path.slice(1);this.IsSink(c)?c.provider=new k(a):c.provider=Module.docs[a].chunkStorage?new q(Module.docs[a].chunkStorage):Module.docs[a].buffer?new m(Module.docs[a].buffer):new h(Module.docs[a].file)},close:function(c){c.provider.close()},read:function(c,a,b,d,e){return c.provider.read(a,b,d)},llseek:function(c,a,b){c=c.provider;1===b?a+=c.getPos():2===b&&(a=c.getTotalSize()+a);if(0>a)throw new Module.FS.ErrnoError(Module.ERRNO_CODES.EINVAL);c.seek(a);return a},
write:function(c,a,b,d,e){return c.provider.write(a,b,d)}};THROW=function(c){throw{type:"InvalidPDF",message:c};};REX=function(c){c&&THROW(GetErrToString(c))};GetErrMessage=function(c){return Module.Pointer_stringify(Module.f28(c))};GetErrFunction=function(c){return Module.Pointer_stringify(Module.f29(c))};GetErrLineNumber=function(c){return Module.Pointer_stringify(Module.f30(c))};GetErrFileName=function(c){return Module.Pointer_stringify(Module.f31(c))};GetErrToString=function(c){return"Exception: \n\t Message: "+
GetErrMessage(c)+"\n\t Filename: "+GetErrFileName(c)+"\n\t Function: "+GetErrFunction(c)+"\n\t Linenumber: "+GetErrLineNumber(c)};b.Initialize=function(c){var a=Module.Runtime.stackSave();c=c?Module.allocate(Module.intArrayFromString(c),"i8",Module.ALLOC_STACK):0;REX(Module.f32(c));REX(Module.f33(2));Module.Runtime.stackRestore(a)};b.GetDoc=function(c){if(c in Module.docs)return Module.docs[c].ptr;throw{type:"InvalidDocReference",message:"Unable to access Document id="+c+". The document appears to be invalid or was deleted."};
};b.clearDocBackend=function(){null!==Module.cache_ptr?(Module.has_buf_ownership&&Module._free(Module.cache_ptr),Module.cache_ptr=null):Module.docs[b.currentFileString]&&delete Module.docs[b.currentFileString]};b.MakeDev=function(c){if(!f[c]){var a=FS.makedev(3,5);FS.registerDevice(a,p);FS.mkdev(c,511,a);f[c]=!0}};b.CreateDocFileBackend=function(c,a){Module.MakeDev(a);var b=Module.allocate(4,"i8",Module.ALLOC_STACK);Module.docs[a]={file:c};var d=Module.allocate(Module.intArrayFromString(a),"i8",Module.ALLOC_STACK);
REX(Module.f34(d,b));b=Module.getValue(b,"i8*");Module.docs[a].ptr=b};b.InsertImageIntoDoc=function(c,a){var b=[];try{var d=Module.ElementBuilderCreate();b.push(function(){Module.ElementBuilderDestroy(d)});var e=Module.ElementWriterCreate();b.push(function(){Module.ElementWriterDestroy(e)});var f=Module.ImageGetImageWidth(a),s=Module.ImageGetImageHeight(a),h=f/s;1<h?(f=612,s=parseInt(f/h)):(s=792,f=parseInt(s*h));var g=Module.ElementBuilderCreateImage(d,a,0,0,f,s),k=Module.PDFDocPageCreate(c,f,s);
Module.ElementWriterBegin(e,k);Module.ElementWriterWritePlacedElement(e,g);Module.ElementWriterEnd(e);Module.PDFDocPagePushBack(c,k)}finally{b.forEach(function(c){c()})}};DownloadData=function(c,a,b){"object"===typeof c?(this.m_pages=c.m_pages,this.m_has_named_dests=c.m_has_named_dests,this.m_finished_download=c.m_finished_download,this.m_has_outline=c.m_has_outline,this.m_current_page=c.m_current_page,this.m_id=c.m_id,this.size=c.size,this.timeout=c.timeout,this.eventPageArray=c.eventPageArray,this.requirePageCapabilities=
c.requirePageCapabilities):(this.m_pages=[],this.m_has_outline=this.m_finished_download=this.m_has_named_dests=!1,this.m_current_page=1,this.m_id=b,this.size=c,this.timeout=null,this.eventPageArray=[],this.requirePageCapabilities={});this.downloadUserData=Module.createDownloadUserData(a,b)};DownloadData.prototype={getJSUrl:function(){return Module.extractDownloadUserData(this.downloadUserData).url},getDocId:function(){return Module.extractDownloadUserData(this.downloadUserData).docId},destroyUserData:function(){Module.destroyDownloadUserData(this.downloadUserData)}};
b.createDownloadUserData=function(c,a){var b=Module.allocate(Module.intArrayFromString(c),"i8",Module.ALLOC_NORMAL),d=Module.allocate(8,"i8",Module.ALLOC_NORMAL);Module.setValue(d,b,"i8*");Module.setValue(d+4,parseInt(a),"i32");return this.downloadUserData=d};b.extractDownloadUserData=function(c){var a=Module.getValue(c,"i8*"),a=Module.Pointer_stringify(a);c=Module.getValue(c+4,"i32").toString();return{url:a,docId:c}};b.destroyDownloadUserData=function(c){Module._free(Module.getValue(c,"i8*"));Module._free(c)};
downloadDataMap={};b.GetDownloadData=function(c){if(c in downloadDataMap)return downloadDataMap[c]};b.DownloaderHint=function(c,a){var b=Module.GetDoc(c),d=downloadDataMap[b];a.currentPage&&(d.m_current_page=a.currentPage);if(a.visiblePages){for(var e=a.visiblePages,f=0;f<e.length;++f)++e[f];for(var s in this.requirePageCapabilities)this.requirePageCapabilities.hasOwnProperty(s)&&e.push(parseInt(s));(f=Module.docs[c].chunkStorage)&&f.keepVisibleChunks(d.downloader,e);d=e.length;s=Module.allocate(4*
d,"i8",Module.ALLOC_STACK);for(f=0;f<d;++f)Module.setValue(s+4*f,e[f],"i32");REX(Module.f35(b,s,d,1,0))}};b.RequirePage=function(c,a,b){c=Module.GetDoc(c);var d=downloadDataMap[c];d&&!d.m_pages[a]?(a in d.requirePageCapabilities?d.requirePageCapabilities[a].push(b):d.requirePageCapabilities[a]=[b],b=Module.allocate(4,"i8",Module.ALLOC_STACK),Module.setValue(b,a,"i32"),Module.f35(c,b,1,0,0)):b.resolve()};b.IsLinearizationValid=function(c){c=Module.GetDoc(c);if(c=downloadDataMap[c]){var a=Module.allocate(4,
"i8",Module.ALLOC_STACK);REX(Module.f36(c.downloader,a));return 0!==Module.getValue(a,"i8")}return!1};b.ShouldRunRender=function(c,a){var b=Module.GetDoc(c);return(b=downloadDataMap[b])?b.m_pages[a]:!0};b.createCallbacksStruct=function(c){if(!e){var a=function(c){return function(a,b,l,d){var e=arguments;a in downloadDataMap?c.apply(this,e):setTimeout(function(){a in downloadDataMap&&c.apply(this,e)},0)}};e={downloadProc:Runtime.addFunction(function(c,a,b,l,e){l=Module.extractDownloadUserData(l);var f=
l.docId;d(l.url,a,b).then(function(l){f in Module.docs&&Module.docs[f].chunkStorage&&Module.docs[f].chunkStorage.writeChunk(l,a);Module.f37(0,a,b,c)})}),notifyUpdatePage:Runtime.addFunction(a(function(c,a,b,l){var d=downloadDataMap[c];d.m_pages[a]=!0;var e=d.eventPageArray;if(a in d.requirePageCapabilities)for(b=d.requirePageCapabilities[a],l=0;l<b.length;++l)b[l].resolve();d.timeout?e.push(a):(d.timeout=setTimeout(function(){Module.postPagesUpdatedEvent(c,d.m_id,e);d.timeout=null},100),e=[a])})),
notifyUpdateOutline:Runtime.addFunction(a(function(c,a){var b=downloadDataMap[c];b.m_has_outline||(b.m_has_outline=!0,Module.postEvent(b.m_id,"bookmarksUpdated",{}))})),notifyUpdateNamedDests:Runtime.addFunction(a(function(c,a){var b=downloadDataMap[c];b.m_has_named_dests||(b.m_has_named_dests=!0)})),notifyUpdateThumb:Runtime.addFunction(a(function(c,a){})),notifyFinishedDownload:Runtime.addFunction(a(function(c,a){var b=downloadDataMap[c];b.m_finished_download||(b.m_finished_download=!0,Module.postEvent(b.m_id,
"documentComplete",{}))})),notifyDocumentError:Runtime.addFunction(function(c,a){}),getCurrentPage:Runtime.addFunction(function(c,a){return downloadDataMap[c].m_current_page})}}a=Module.allocate(40,"i8",Module.ALLOC_STACK);Module.setValue(a,e.downloadProc,"i8*");Module.setValue(a+4,c,"i8*");Module.setValue(a+8,e.notifyUpdatePage,"i8*");Module.setValue(a+12,e.notifyUpdateOutline,"i8*");Module.setValue(a+16,e.notifyUpdateNamedDests,"i8*");Module.setValue(a+20,e.notifyUpdateThumb,"i8*");Module.setValue(a+
24,e.notifyFinishedDownload,"i8*");Module.setValue(a+28,e.notifyDocumentError,"i8*");Module.setValue(a+32,e.getCurrentPage,"i8*");Module.setValue(a+36,0,"i8*");return a};b.CreateDocDownloaderBackend=function(c,a,b){var d=c.url,e=c.size;Module.allocate(Module.intArrayFromString(d),"i8",Module.ALLOC_NORMAL);var d=c.downloadData?new DownloadData(c.downloadData,d,b):new DownloadData(c.size,d,b),f=Module.createCallbacksStruct(d.downloadUserData),h=Module.allocate(4,"i8",Module.ALLOC_STACK);Module.MakeDev(b);
if(c.chunkStorage)c=new n(c.chunkStorage);else{var g=Math.ceil((c.size+524288-1)/524288/8),g=new Int8Array(new ArrayBuffer(g));c=new n(c.url,c.size,g)}Module.docs[b]={chunkStorage:c};REX(Module.f38(f,e,Module.GetUStringFromJSString(b),h));d.downloader=Module.getValue(h,"i8*");if(e=Module.f39(d.downloader,a))Module.f40(d.downloader),REX(e);doc=Module.getValue(a,"i8*");Module.docs[b].ptr=doc;Module.PDFDocInitSecurityHandler(doc)&&REX(Module.f13(doc,d.downloader));downloadDataMap[doc]=d};b.CreateDocBackend=
function(c,a,d){var e=Module.allocate(4,"i8",Module.ALLOC_STACK),f=Module.Runtime.stackSave();try{if(c){var h,s=a&&"pdf"!=a;if("object"==typeof c&&c.url)b.CreateDocDownloaderBackend(c,e,d);else{var k=c instanceof ArrayBuffer,m=k?"buffer":"file";if(k&&(c=new Uint8Array(c),10485760>c.length+g&&!s)){g+=c.length;var n=c.length,p=Module._malloc(c.length);Module.HEAPU8.set(c,p);REX(Module.f42(p,n,e));h=Module.getValue(e,"i8*");Module.docs[d]={ptr:h,bufPtr:p,bufPtrSize:n,ownership:!0};Module.docs[d].extension=
a;return}Module.MakeDev(d);k={};k[m]=c;Module.docs[d]=k;if(s){var q=Module.GetUStringFromJSString(d);REX(Module.f41(e));h=Module.getValue(e,"i8*");var A=Module.ImageCreateFromFile(h,q);Module.InsertImageIntoDoc(h,A)}else{var C=Module.allocate(Module.intArrayFromString(d),"i8",Module.ALLOC_STACK);REX(Module.f34(C,e));h=Module.getValue(e,"i8*")}Module.docs[d].extension=a;Module.docs[d].ptr=h}}else REX(Module.f41(e)),h=Module.getValue(e,"i8*"),Module.docs[d]={ptr:h},Module.docs[d].extension=a}finally{Module.Runtime.stackRestore(f)}};
b.ChangeDocBackend=function(c,a){var d=Module.docs[c];d?(d.bufPtr&&d.ownership&&(Module._free(d.bufPtr),g-=d.bufPtrSize),delete Module.docs[c]):b.utils.warn("Trying to delete document "+c+" that does not exist.");Module.docs[c]=a};b.DeleteDoc=function(c){var a=Module.docs[c];a?(a.ptr&&(a.ptr in downloadDataMap&&(clearTimeout(downloadDataMap[a.ptr].timeout),downloadDataMap[a.ptr].destroyUserData(),delete downloadDataMap[a.ptr]),Module.PDFDocDestroy(a.ptr)),a.bufPtr&&a.ownership&&(Module._free(a.bufPtr),
g-=a.bufPtrSize),delete Module.docs[c]):b.utils.warn("Trying to delete document "+c+" that does not exist.")};b.CreateDoc=function(c,l,d){if(!d){do d=(++a).toString();while(d in Module.docs)}Module.has_buf_ownership=!0;b.CreateDocBackend(c,l,d);return d};b.CreateEmptyDoc=function(){var c=(++a).toString(),b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f41(b));b=Module.getValue(b,"i8*");Module.docs[c]={ptr:b};return c};b.GetPageCount=function(c){var a=Module.allocate(4,"i8",Module.ALLOC_STACK);
REX(Module.f43(c,a));return Module.getValue(a,"i8*")};b.GetPage=function(c,a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f44(c,a,b));b=Module.getValue(b,"i8*");Module.PageIsValid(b)||THROW("Trying to access page that doesn't exist at index "+a);return b};b.PageGetPageWidth=function(c){var a=Module.allocate(8,"i8",Module.ALLOC_STACK);REX(Module.f45(c,1,a));return Module.getValue(a,"double")};b.PageGetPageHeight=function(c){var a=Module.allocate(8,"i8",Module.ALLOC_STACK);REX(Module.f46(c,
1,a));return Module.getValue(a,"double")};b.PageGetDefaultMatrix=function(c,a){var b=Module.allocate(48,"i8",Module.ALLOC_STACK);a||(a=0);REX(Module.f17(c,!0,1,a,b));return b};b.GetMatrixAsArray=function(a){for(var b=[],d=0;6>d;++d)b[d]=Module.getValue(a+8*d,"double");return b};b.PageGetPageInfo=function(a){var b=Module.allocate(48,"i8",Module.ALLOC_STACK),d=Module.allocate(8,"i8",Module.ALLOC_STACK),e=Module.allocate(8,"i8",Module.ALLOC_STACK),f=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f47(a,
!0,1,0,d,e,b,f));return{rotation:Module.getValue(f,"i8*"),width:Module.getValue(d,"double"),height:Module.getValue(e,"double"),matrix:Module.GetMatrixAsArray(b)}};b.GetUStringFromJSString=function(a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);a=Module.intArrayFromString(a);var d=Module.allocate(a,"i8",Module.ALLOC_STACK);REX(Module.f48(d,a.length-1,5,b));return Module.getValue(b,"i8*")};b.GetJSStringFromUString=function(a){var b=Module.allocate(4,"i16*",Module.ALLOC_STACK);REX(Module.f50(a,
b));return Module.UTF16ToString(Module.getValue(b,"i16*"))};b.GetJSStringFromCString=function(a){return Module.Pointer_stringify(a)};b.PDFNetSetResourceData=function(a){Module.res_ptr=Module._malloc(a.length);Module.HEAPU8.set(a,Module.res_ptr);REX(Module.f51(Module.res_ptr,a.length));Module.res_ptr_size=a.length};b.PDFDrawSetDPI=function(a,b){REX(Module.f52(a,b))};b.PDFDocDestroy=function(a){REX(Module.f53(a))};b.PDFRasterizerCreate=function(){var a=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f54(0,
a));return Module.getValue(a,"i8*")};b.PageGetRotation=function(a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f55(a,b));return Module.getValue(b,"i8*")};b.PageGetId=function(a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f56(a,b));b=Module.getValue(b,"i8*");a=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f57(b,a));a=Module.getValue(a,"i32");var d=Module.allocate(2,"i8",Module.ALLOC_STACK);REX(Module.f58(b,d));d=Module.getValue(d,"i16");return a+"-"+d};b.PageSetRotation=
function(a,b){REX(Module.f59(a,b))};b.GetDefaultMatrixBox=function(a,b,d){var e=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f55(a,e));a=(Module.getValue(e,"i32")+d)%4;d=Module.allocate(48,"i8",Module.ALLOC_STACK);switch(a){case 0:return REX(Module.f60(d,1,0,0,-1,-b.x1,b.y2)),d;case 1:return REX(Module.f60(d,0,1,1,0,-b.y1,-b.x1)),d;case 2:return REX(Module.f60(d,-1,0,0,1,b.x2,-b.y1)),d;case 3:return REX(Module.f60(d,0,-1,-1,0,b.y2,b.x2)),d}throw Error("Yikes, we don't support that rotation type");
};b.Matrix2DMultBBox=function(a,b){var d=Module.allocate(8,"i8",Module.ALLOC_STACK),e=Module.allocate(8,"i8",Module.ALLOC_STACK);Module.setValue(d,b.x1,"double");Module.setValue(e,b.y1,"double");REX(Module.f61(a,d,e));b.x1=Module.getValue(d,"double");b.y1=Module.getValue(e,"double");Module.setValue(d,b.x2,"double");Module.setValue(e,b.y2,"double");REX(Module.f61(a,d,e));b.x2=Module.getValue(d,"double");b.y2=Module.getValue(e,"double");return b};b.Matrix2DMult=function(a,b){var d=Module.allocate(8,
"i8",Module.ALLOC_STACK),e=Module.allocate(8,"i8",Module.ALLOC_STACK);Module.setValue(d,b.x,"double");Module.setValue(e,b.y,"double");REX(Module.f61(a,d,e));b.x=Module.getValue(d,"double");b.y=Module.getValue(e,"double");return b};b.Matrix2DConcat=function(a,b){var d=Module.getValue(b,"double"),e=Module.getValue(b+8,"double"),f=Module.getValue(b+16,"double"),h=Module.getValue(b+24,"double"),s=Module.getValue(b+32,"double"),g=Module.getValue(b+40,"double");REX(Module.f62(a,d,e,f,h,s,g))};b.Matrix2DSet=
function(a,b,d,e,f,h,g){REX(Module.f60(a,b,d,e,f,h,g))};b.IteratorHasNext=function(a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f63(a,b));return 0!=Module.getValue(b,"i8")};b.IteratorCurrent=function(a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f64(a,b));return Module.getValue(Module.getValue(b,"i8*"),"i8*")};b.IteratorNext=function(a){REX(Module.f65(a))};b.PageGetNumAnnots=function(a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f66(a,b));return Module.getValue(b,
"i32")};b.PageGetAnnot=function(a,b){var d=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f67(a,b,d));return Module.getValue(d,"i8*")};b.PageAnnotRemove=function(a,b){REX(Module.f68(a,b))};b.AnnotGetType=function(a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f69(a,b));return Module.getValue(b,"i32")};b.AnnotHasAppearance=function(a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f70(a,0,0,b));return 0!=Module.getValue(b,"i8*")};b.AnnotRefreshAppearance=function(a){REX(Module.f71(a))};
b.ObjErase=function(a,b){var d=Module.allocate(Module.intArrayFromString(b),"i8",Module.ALLOC_STACK);REX(Module.f72(a,d))};b.GetJSDoubleArrFromCore=function(a,b){for(var d=Array(b),e=a,f=0;f<b;++f)d[f]=Module.getValue(e,"double"),e+=8;return d};b.GetJSIntArrayFromCore=function(a,b){for(var d=Array(b),e=a,f=0;f<b;++f)d[f]=Module.getValue(e,"i32"),e+=4;return d};b.BookmarkIsValid=function(a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f73(a,b));return 0!=Module.getValue(b,"i8")};b.BookmarkGetNext=
function(a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f74(a,b));return Module.getValue(b,"i8*")};b.BookmarkGetFirstChild=function(a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f75(a,b));return Module.getValue(b,"i8*")};b.BookmarkHasChildren=function(a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f76(a,b));return 0!=Module.getValue(b,"i8")};b.BookmarkGetAction=function(a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f77(a,b));return Module.getValue(b,
"i8*")};b.BookmarkGetTitle=function(a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f78(a,b));a=Module.getValue(b,"i8*");return Module.GetJSStringFromUString(a)};b.ActionGetType=function(a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f79(a,b));return Module.getValue(b,"i32")};b.ActionGetDest=function(a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f80(a,b));return Module.getValue(b,"i8*")};b.DestinationIsValid=function(a){var b=Module.allocate(4,"i8",
Module.ALLOC_STACK);REX(Module.f81(a,b));return 0!=Module.getValue(b,"i8")};b.DestinationGetPage=function(a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f82(a,b));return Module.getValue(b,"i8*")};b.PageIsValid=function(a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f83(a,b));return 0!=Module.getValue(b,"i8")};b.PageGetIndex=function(a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f84(a,b));return Module.getValue(b,"i32")};b.ObjGetAsPDFText=function(a){var b=
Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f85(a,b));a=Module.getValue(b,"i8*");return Module.GetJSStringFromUString(a)};b.ObjFindObj=function(a,b){var d=Module.allocate(4,"i8",Module.ALLOC_STACK),e=allocate(intArrayFromString(b),"i8",ALLOC_STACK).REX(Module.f86(a,e,d));return Module.getValue(d,"i8*")};b.PDFDocGetFirstBookmark=function(a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f87(a,b));return Module.getValue(b,"i8*")};b.DestinationGetExplicitDestObj=function(a){var b=
Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f88(a,b));return Module.getValue(b,"i8*")};b.DestinationGetFitType=function(a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f89(a,b));return Module.getValue(b,"i32")};b.ObjIsNumber=function(a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f90(a,b));return 0!=Module.getValue(b,"i8")};b.ObjGetNumber=function(a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f91(a,b));return Module.getValue(b,"double")};b.ObjGetAt=
function(a,b){var d=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f92(a,b,d));return Module.getValue(d,"i8*")};b.Matrix2DInverse=function(a){var b=Module.allocate(48,"i8",Module.ALLOC_STACK);REX(Module.f93(a,b));return b};b.PDFDocInitSecurityHandler=function(a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f94(a,0,b));return 0!=Module.getValue(b,"i8")};b.PDFDocInitStdSecurityHandler=function(a,b){var d=Module.allocate(4,"i8",Module.ALLOC_STACK),e=Module.intArrayFromString(b),
f=Module.allocate(e,"i8",Module.ALLOC_STACK);REX(Module.f95(a,f,e.length-1,d));return 0!=Module.getValue(d,"i8")};b.PDFDocFDFExtract=function(a,b){var d=Module.allocate(4,"i8",Module.ALLOC_STACK);b?REX(Module.f96(a,b,2,d)):REX(Module.f97(a,2,d));return Module.getValue(d,"i8*")};b.PDFDocInsertPages=function(a,b,d,e,f){REX(Module.f98(a,b,d,e,f?1:0,0))};b.PDFDocMovePages=function(a,b,d){REX(Module.f99(a,b,a,d,0,0))};b.PDFDocGetPageIterator=function(a,b){var d=Module.allocate(4,"i8",Module.ALLOC_STACK);
REX(Module.f100(a,b,d));return Module.getValue(d,"i8*")};b.PDFDocPageRemove=function(a,b){REX(Module.f101(a,b))};b.PDFDocPageCreate=function(a,b,d){var e=Module.allocate(40,"i8",Module.ALLOC_STACK);Module.setValue(e,0,"double");Module.setValue(e+8,0,"double");Module.setValue(e+16,b,"double");Module.setValue(e+24,d,"double");Module.setValue(e+32,0,"double");b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f102(a,e,b));return Module.getValue(b,"i8*")};b.PDFDocPageInsert=function(a,b,d){REX(Module.f103(a,
b,d))};b.PageSetCreate=function(){var a=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f104(a));return Module.getValue(a,"i8*")};b.PageSetCreateRange=function(a,b){var d=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f105(d,a,b));return Module.getValue(d,"i8*")};b.PageSetAddPage=function(a,b){REX(Module.f106(a,b))};b.FDFDocSaveAsXFDF=function(a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(f107(a,b));a=Module.getValue(b,"i8*");return Module.GetJSStringFromUString(a)};b.ElementBuilderCreate=
function(){var a=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f108(a));return Module.getValue(a,"i8*")};b.ElementBuilderDestroy=function(a){REX(Module.f109(a))};b.ElementBuilderCreateImage=function(a,b,d,e,f,h){var g=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f110(a,b,d,e,f,h,g));return Module.getValue(g,"i8*")};b.ElementWriterCreate=function(){var a=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f111(a));return Module.getValue(a,"i8*")};b.ElementWriterDestroy=function(a){REX(Module.f112(a))};
b.ElementWriterBegin=function(a,b){REX(Module.f113(a,b,1))};b.ElementWriterWritePlacedElement=function(a,b){REX(Module.f114(a,b))};b.ElementWriterEnd=function(a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f115(a,b))};b.ImageGetImageWidth=function(a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f116(a,b));return Module.getValue(b,"i32")};b.ImageGetImageHeight=function(a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f117(a,b));return Module.getValue(b,
"i32")};b.ImageCreateFromMemory2=function(a,b,d){var e=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f118(a,b,d,0,e));return Module.getValue(e,"i8*")};b.ImageCreateFromFile=function(a,b){var d=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f119(a,b,0,d));return Module.getValue(d,"i8*")};b.PDFDocPagePushBack=function(a,b){REX(Module.f120(a,b))};b.PDFDocHasOC=function(a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f121(a,b));return 0!=Module.getValue(b,"i8")};b.PDFDocGetOCGConfig=
function(a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f122(a,b));return Module.getValue(b,"i8*")};b.OCGContextCreate=function(a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f123(a,b));return Module.getValue(b,"i8*")}})("undefined"===typeof self?this.Module:self.Module);!function(b){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=b();else if("function"==typeof define&&define.amd)define([],b);else{var g;"undefined"!=typeof window?g=window:"undefined"!=typeof global?g=global:"undefined"!=typeof self&&(g=self);g.PriorityQueue=b()}}(function(){return function g(a,f,e){function d(m,q){if(!f[m]){if(!a[m]){var k="function"==typeof require&&require;if(!q&&k)return k(m,!0);if(h)return h(m,!0);k=Error("Cannot find module '"+m+"'");throw k.code="MODULE_NOT_FOUND",
k;}k=f[m]={exports:{}};a[m][0].call(k.exports,function(e){var c=a[m][1][e];return d(c?c:e)},k,k.exports,g,a,f,e)}return f[m].exports}for(var h="function"==typeof require&&require,m=0;m<e.length;m++)d(e[m]);return d}({1:[function(g,a,f){var e={}.hasOwnProperty,d=function(a,d){function f(){this.constructor=a}for(var g in d)e.call(d,g)&&(a[g]=d[g]);f.prototype=d.prototype;a.prototype=new f;a.__super__=d.prototype;return a};f=g("./PriorityQueue/AbstractPriorityQueue");g=g("./PriorityQueue/ArrayStrategy");
f=function(a){function e(a){a||(a={});a.strategy||(a.strategy=BinaryHeapStrategy);a.comparator||(a.comparator=function(a,d){return(a||0)-(d||0)});e.__super__.constructor.call(this,a)}d(e,a);return e}(f);f.ArrayStrategy=g;a.exports=f},{"./PriorityQueue/AbstractPriorityQueue":2,"./PriorityQueue/ArrayStrategy":3}],2:[function(g,a,f){a.exports=function(){function a(d){if(null==(null!=d?d.strategy:void 0))throw"Must pass options.strategy, a strategy";if(null==(null!=d?d.comparator:void 0))throw"Must pass options.comparator, a comparator";
this.priv=new d.strategy(d);this.length=0}a.prototype.queue=function(a){this.length++;this.priv.queue(a)};a.prototype.dequeue=function(a){if(!this.length)throw"Empty queue";this.length--;return this.priv.dequeue()};a.prototype.peek=function(a){if(!this.length)throw"Empty queue";return this.priv.peek()};a.prototype.remove=function(a){this.priv.remove(a)&&--this.length};a.prototype.find=function(a){return 0<=this.priv.find(a)};a.prototype.removeAllMatching=function(a,e){var f=this.priv.removeAllMatching(a,
e);this.length-=f};return a}()},{}],3:[function(g,a,f){var e;e=function(a,e,f){var g,q,k;q=0;for(g=a.length;q<g;)k=q+g>>>1,0<=f(a[k],e)?q=k+1:g=k;return q};a.exports=function(){function a(d){var e;this.options=d;this.comparator=this.options.comparator;this.data=(null!=(e=this.options.initialValues)?e.slice(0):void 0)||[];this.data.sort(this.comparator).reverse()}a.prototype.queue=function(a){var d;d=e(this.data,a,this.comparator);this.data.splice(d,0,a)};a.prototype.dequeue=function(){return this.data.pop()};
a.prototype.peek=function(){return this.data[this.data.length-1]};a.prototype.find=function(a){var d=e(this.data,a,this.comparator)-1;return 0<=d&&!this.comparator(this.data[d],a)?d:-1};a.prototype.remove=function(a){a=this.find(a);return 0<=a?(this.data.splice(a,1),!0):!1};a.prototype.removeAllMatching=function(a,d){for(var e=0,f=this.data.length-1;0<=f;--f)if(a(this.data[f])){var g=this.data.splice(f,1)[0];d&&d(g);++e}return e};return a}()},{}]},{},[1])(1)});(function(b){b.SetupPDFNetFunctions=function(g){for(var a=function(b){if("object"===typeof b)if(b.buffer)b=b.buffer.slice(b.byteOffset,b.byteOffset+b.length);else for(prop in b)b.hasOwnProperty(prop)&&(b[prop]=a(b[prop]));return b},f=Module.f124(),e,d=Module.f125(f),h=function(b,d,c){b=(b=b.docId)?Module.GetDoc(b):0;(c=Module.EMSCallSharedFunction(f,c,b))?d.reject({type:"InvalidPDF",message:GetErrToString(c)}):(c=Module.EMSGetLastResponse(f),c=a(c),d.resolve(c))};e=Module.f126(d);)e=Module.GetJSStringFromCString(e),
b.queue.onAsync(e,h);Module.f127(d);if(Module.f128){var m={},d=function(a,b){g.on(a,b);m[a]=!0};Module.docPtrStringToIdMap={};var n=function(a){if(a in Module.docPtrStringToIdMap)return Module.docPtrStringToIdMap[a];throw Error("Couldn't find document "+a);};b.queue.onAsync("PDFDoc.RequirePage",function(a,b){Module.RequirePage(n(a.docId),a.pageNum,b)});d("pdfDocCreateFromBuffer",function(a){a=Module.CreateDoc(a.buf);var b=Module.GetDoc(a).toString(16);Module.docPtrStringToIdMap[b]=a;return b});d("PDFDoc.destroy",
function(a){a=n(a.auto_dealloc_obj);Module.DeleteDoc(a)});d("PDFDoc.saveMemoryBuffer",function(a){var b=n(a.doc);return Module.SaveHelper(Module.GetDoc(b),b,a.flags).slice(0)});d("pdfDocCreate",function(a){a=Module.CreateDoc(a.buf);var b=Module.GetDoc(a).toString(16);Module.docPtrStringToIdMap[b]=a;return b});d("GetPDFDoc",function(a){a=a.docId;var b=Module.GetDoc(a).toString(16);Module.docPtrStringToIdMap[b]=a;return b});d("ExtractPDFNetLayersContext",function(a){var b=a.layers;a=Module.GetDoc(a.docId);
var c=0;b?c=Module.EMSCreateUpdatedLayersContext(a,b):Module.PDFDocHasOC(a)&&(b=Module.PDFDocGetOCGConfig(a),c=Module.OCGContextCreate(b));return c.toString(16)});for(var q=Module.f128(),d=Module.f125(q),h=function(b,d){var c=Module.EMSCallPDFNetFunction(q,b);c?d.reject({type:"InvalidPDF",message:GetErrToString(c)}):(c=Module.EMSGetLastResponse(q),c=a(c),d.resolve(c))};e=Module.f126(d);)if(e=Module.GetJSStringFromCString(e),!m[e])g.onAsync(e,h);Module.f127(d)}}})("undefined"===typeof self?this:self);var isChrome=function(){var b=self.navigator.userAgent.match(/OPR/),g=self.navigator.userAgent.match(/Maxthon/),a=self.navigator.userAgent.match(/Edge/);return self.navigator.userAgent.match(/Chrome\/(.*?) /)&&!b&&!g&&!a}(),loadPDFNetC=function(){if(isChrome){var b=new XMLHttpRequest;b.open("GET","PDFNetCFull.js",!1);b.responseType="text";b.send();if(200==b.status)b=b.responseText,b=b.split('"use asm";').join(""),eval.call(self,b);else throw Error("Failed to load PDFNetCFull.js");}else importScripts("PDFNetCFull.js")};
self.shouldResize||loadPDFNetC();
(function(b){b.EmscriptenPDFManager=function(){return this};b.EmscriptenPDFManager.prototype={LoadRes:function(a,b){Module.loadResources(a,b)},OnInitialized:function(a){Module.loaded?a():(Module.init_cb=function(){a()},b.utils.log("PDFNet is not initialized yet!"))},NewDoc:function(a,b,e,d){try{e.resolve(Module.loadDoc(a,b,d))}catch(g){Module.stopped||e.reject(g)}},DeleteDocument:function(a){Module.DeleteDoc(a)},UpdatePassword:function(a,b){return Module.UpdatePassword(a,b)},GetCanvas:function(a,
b,e,d,g,m,n,q,k){Module.loadCanvas(a,b,e,d,g,m,n,q,k)},GetCanvasProgressive:function(){return Module.GetCurrentCanvasData(!0)},LoadBookmarks:function(a){return Module.LoadBookmarks(a)},LoadText:function(a,b,e){Module.GetTextData(a,b+1,e)},SaveDoc:function(a,b,e,d){Module.SaveDoc(a,b,e,d)},CancelCurrent:function(){return Module.cancelCurrent()},LoadAnnotations:function(a,b){var e;b?(e=Module.PageArrayToPageSet(b),e=Module.PDFDocExportXFDF(a,e)):e=Module.PDFDocExportXFDF(a);return e},SetWorkerRestartCallback:function(a){Module.SetWorkerRestartCallback(a)},
Initialize:function(a){Module.TOTAL_MEMORY=a;loadPDFNetC()},MergeXFDF:function(a,b,e){return Module.MergeXFDF(a,b,e)},InsertPages:function(a,b,e,d,g,m){return Module.InsertPages(a,b,e,d,g,m)},MovePages:function(a,b,e,d){return Module.MovePages(a,b,e,d)},RemovePages:function(a,b,e){return Module.RemovePages(a,b,e)},RotatePages:function(a,b,e,d){return Module.RotatePages(a,b,e,d)},ExtractPages:function(a,b,e,d){return Module.ExtractPages(a,b,e,d)},CropPages:function(a,b,e,d,g,m,n){return Module.CropPages(a,
b,e,d,g,m,n)},DownloaderHint:function(a,b){return Module.DownloaderHint(a,b)},IsLinearizationValid:function(a){return Module.IsLinearizationValid(a)},shouldRunRender:function(a){return Module.ShouldRunRender(a.docId,a.pageIndex+1)},Stop:function(){Module.stopped=!0},InsertBlankPages:function(a,b,e,d,g){Module.InsertBlankPages(a,b,e,d,g)}};var g={setup:function(a){function f(e,d){b.utils.log("Redirected "+e.callbackId);a.send("redirect_request",e)}a.replaceAsync("test",f);a.replaceAsync("NewDoc",f);
a.replaceAsync("UpdatePassword",f);a.replaceAsync("LoadRes",f);a.replaceAsync("GetCanvas",f);a.replaceAsync("GetCanvasPartial",f);a.replaceAsync("LoadText",f);a.replaceAsync("SaveDoc",f);a.replaceAsync("LoadBookmarks",f);a.replaceAsync("GetCanvasProgressive",f);a.replaceAsync("LoadAnnotations",f);a.replaceAsync("actionCancel",f)}};(function(a){function f(a){var b=a.data,c=a.action,d;d="GetCanvas"==c||"GetCanvasPartial"==c?m.shouldRunRender(b):!0;d?(r=a,n.actionMap[c](b,a.asyncCallCapability,a)):(deferredQueue.queue(a),
h())}function e(a,b){a.asyncCallCapability=b;r?n.queue(a):f(a)}function d(d){self.shouldResize&&m.Initialize(d.size);if(d.array instanceof Uint8Array){var e=255===d.array[0];a.postMessageTransfers=e;"response"in new XMLHttpRequest?m.OnInitialized(function(){m.SetWorkerRestartCallback(function(b,c,d){g.setup(a);var e=[],f;r&&(r.asyncCallCapability=void 0,e.push(r));for(var h=n.length,s=0;s<h;++s)f=n.dequeue(),f.asyncCallCapability=void 0,e.push(f);a.send("worker_restart",{size:b,queue:e,docData:d,
resData:c,workerPath:q,location:q+"pdf/ResizableWorker.js"});m.Stop();r&&(m.CancelCurrent(),r=null);l();r=null});var f=function(){c();a.send("test",{supportTypedArray:!0,supportTransfers:e})};b.SetupPDFNetFunctions(a);if(self.shouldResize)if(d.resData&&(m.LoadRes(d.resData),q=d.workerPath),d.docData){var h=d.docData,k=[],p;for(p in h){var t=createPromiseCapability();k.push(t.promise);m.NewDoc(h[p].source,h[p].extension,t,p)}Promise.all(k).then(function(){f()})}else f();else f()}):a.send("test",!1)}else a.send("test",
!1)}function h(){if(!r||"BeginOperation"!=r.action)if(n.length){if(!r||r.priority!=t){var a=n.dequeue();f(a)}}else r=null}var m=new b.EmscriptenPDFManager,n,q,k=!1,p=!1;Module.workerMessageHandler=a;var c=function(){k?p||(a.send("workerLoaded",{}),p=!0):k=!0};m.OnInitialized(c);var l=function(){b.queue=n=new PriorityQueue({strategy:PriorityQueue.ArrayStrategy,comparator:function(a,b){return a.priority===b.priority?a.callbackId-b.callbackId:b.priority-a.priority}});b.deferredQueue=new PriorityQueue({strategy:PriorityQueue.ArrayStrategy,
comparator:function(a,b){return a.priority===b.priority?a.callbackId-b.callbackId:b.priority-a.priority}});n.actionMap={};n.onAsync=function(b,c){a.onAsync(b,e);n.actionMap[b]=c}};l();var r=null;a.on("test",d);a.on("InitWorker",d);var u=function(a){r&&a(r)&&(m.CancelCurrent(),r=null);n.removeAllMatching(a,function(a){a.asyncCallCapability.reject({type:"Cancelled",message:"Operation was cancelled due to document deletion."})})},v=function(a){u(function(b){return b.data&&b.data.docId===a})};a.on("UpdatePassword",
function(a){return m.UpdatePassword(a.docId,a.password)});a.on("LoadRes",function(a){q=a.workerPath;m.LoadRes(a.array,a.l);return{}});a.on("DownloaderHint",function(a){m.DownloaderHint(a.docId,a.hint)});a.on("IsLinearized",function(a){return m.IsLinearizationValid(a.docId)});a.onNextAsync(h);n.onAsync("NewDoc",function(a,b){m.NewDoc(a.value,a.extension,b)});n.onAsync("GetCanvas",function(a,b){m.GetCanvas(a.docId,a.pageIndex,a.width,a.height,a.rotation,null,a.layers,a.overprintMode,b)});n.onAsync("GetCanvasPartial",
function(a,b){m.GetCanvas(a.docId,a.pageIndex,a.width,a.height,a.rotation,a.bbox,a.layers,a.overprintMode,b)});n.onAsync("LoadText",function(a,b){m.LoadText(a.docId,a.pageIndex,b)});n.onAsync("SaveDoc",function(a,b){m.SaveDoc(a.docId,a.xfdfString,a.finishedWithDocument,b)});n.onAsync("MergeXFDF",function(a,b){m.MergeXFDF(a.docId,a.xfdf,b)});n.onAsync("InsertPages",function(a,b){m.InsertPages(a.docId,a.doc,a.pageArray,a.destPos,a.insertBookmarks,b)});n.onAsync("MovePages",function(a,b){m.MovePages(a.docId,
a.pageArray,a.destPos,b)});n.onAsync("RemovePages",function(a,b){m.RemovePages(a.docId,a.pageArray,b)});n.onAsync("RotatePages",function(a,b){m.RotatePages(a.docId,a.pageArray,a.rotation,b)});n.onAsync("ExtractPages",function(a,b){m.ExtractPages(a.docId,a.pageArray,a.xfdfString,b)});n.onAsync("CropPages",function(a,b){m.CropPages(a.docId,a.pageArray,a.topMargin,a.botMargin,a.leftMargin,a.rightMargin,b)});n.onAsync("InsertBlankPages",function(a,b){m.InsertBlankPages(a.docId,a.pageArray,a.width,a.height,
b)});n.onAsync("BeginOperation",function(a,b){b.resolve()});var t=99999;a.on("FinishOperation",function(b){if("BeginOperation"==r.action)a.onNextAsync(h),m.CancelCurrent(),r=null;else throw{message:"Operation has not started."};});a.on("DeleteDocument",function(a){a=a.docId;v(a);m.DeleteDocument(a)});a.on("LoadBookmarks",function(a){return m.LoadBookmarks(a.docId)});a.on("GetCanvasProgressive",function(a){var b;if(r&&r.callbackId===a.callbackId)b=m.GetCanvasProgressive();else{if(n.find({priority:0,
callbackId:a.callbackId}))throw{type:"Queued",message:"Rendering has not started yet."};if(deferredQueue.find({priority:0,callbackId:a.callbackId}))throw{type:"Queued",message:"Rendering has not started yet."};}if(!b)throw{type:"Unavailable",message:"Rendering is complete or was cancelled."};return b});a.on("LoadAnnotations",function(a){return{xfdfString:m.LoadAnnotations(a.docId,a.pages)}});a.on("actionCancel",function(a){r&&r.callbackId===a.callbackId?m.CancelCurrent()&&setTimeout(function(){h()},
0):(n.remove({priority:0,callbackId:a.callbackId}),deferredQueue.remove({priority:0,callbackId:a.callbackId}))})})(new MessageHandler("worker_processor",this))})("undefined"===typeof window?this:window);
